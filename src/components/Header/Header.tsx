import React, { useEffect, useState } from "react";
import styles from "@/styles/Home.module.scss";
import { useAppContext } from "@/contexts/state";
function Header() {
  const { changeLanguage } = useAppContext();
  const [lang, setLang] = useState<string>("DE");
  const handleChange = (e: React.ChangeEvent<HTMLSelectElement>) => {
    changeLanguage(e.target.value);
    setLang(e.target.value);
    localStorage.setItem("lang", e.target.value);
  };

  useEffect(() => {
    const langLocal = localStorage.getItem("lang");
    if (langLocal) {
      setLang(langLocal);
    } else {
      setLang("DE");
    }
  }, []);

  const langList = [
    {
      value: "DE",
    },
    { value: "EN" },
  ];
  return (
    <nav className={styles.navigator}>
      <ul>
        <li>
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M12 13.5C9.9 13.5 8.25 11.85 8.25 9.75C8.25 7.65 9.9 6 12 6C14.1 6 15.75 7.65 15.75 9.75C15.75 11.85 14.1 13.5 12 13.5Z"
              fill="white"
            />
            <path
              d="M12 22.5L5.7 15.075C5.7 15 5.475 14.7 5.475 14.7C4.35 13.275 3.75 11.55 3.75 9.75C3.75 5.175 7.425 1.5 12 1.5C16.575 1.5 20.25 5.175 20.25 9.75C20.25 11.55 19.65 13.275 18.6 14.7L18.375 15L12 22.5ZM6.6 13.8C6.6 13.8 6.75 14.025 6.825 14.1L12 20.175L17.175 14.1C17.175 14.025 17.4 13.8 17.4 13.8C18.3 12.6 18.75 11.25 18.75 9.75C18.75 6 15.75 3 12 3C8.25 3 5.25 6 5.25 9.75C5.25 11.25 5.7 12.6 6.6 13.8Z"
              fill="white"
            />
          </svg>
          <p>LangeStr.40 44579 Castop Rauxel</p>
        </li>
        <li>
          <svg
            width="21"
            height="20"
            viewBox="0 0 21 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M17.9999 19.75H17.8724C3.13494 18.9025 1.04244 6.4675 0.749941 2.6725C0.726373 2.37744 0.761258 2.08062 0.852598 1.79906C0.943937 1.5175 1.08994 1.25673 1.28223 1.03169C1.47452 0.80665 1.70933 0.621766 1.9732 0.48763C2.23707 0.353493 2.52481 0.272741 2.81994 0.250001H6.95244C7.25286 0.24971 7.54644 0.339633 7.79517 0.508122C8.04389 0.676611 8.23629 0.915903 8.34744 1.195L9.48744 4C9.59721 4.27266 9.62444 4.57156 9.56578 4.85957C9.50711 5.14758 9.36512 5.412 9.15744 5.62L7.55994 7.2325C7.80948 8.65056 8.48858 9.95775 9.50536 10.9772C10.5221 11.9967 11.8275 12.6792 13.2449 12.9325L14.8724 11.32C15.0836 11.1146 15.3505 10.9759 15.6399 10.9213C15.9293 10.8666 16.2284 10.8983 16.4999 11.0125L19.3274 12.145C19.6023 12.2597 19.8369 12.4536 20.0012 12.702C20.1654 12.9504 20.252 13.2422 20.2499 13.54V17.5C20.2499 18.0967 20.0129 18.669 19.5909 19.091C19.169 19.5129 18.5967 19.75 17.9999 19.75ZM2.99994 1.75C2.80103 1.75 2.61026 1.82902 2.46961 1.96967C2.32896 2.11032 2.24994 2.30109 2.24994 2.5V2.56C2.59494 7 4.80744 17.5 17.9549 18.25C18.0535 18.2561 18.1522 18.2427 18.2456 18.2105C18.3389 18.1783 18.425 18.1281 18.4988 18.0626C18.5727 17.9971 18.6329 17.9176 18.676 17.8288C18.7191 17.74 18.7442 17.6436 18.7499 17.545V13.54L15.9224 12.4075L13.7699 14.545L13.4099 14.5C6.88494 13.6825 5.99994 7.1575 5.99994 7.09L5.95494 6.73L8.08494 4.5775L6.95994 1.75H2.99994Z"
              fill="white"
            />
          </svg>

          <p>023053080508</p>
        </li>
        <li>
          <svg
            width="22"
            height="16"
            viewBox="0 0 22 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M20 0.5H2C1.60218 0.5 1.22064 0.658035 0.93934 0.93934C0.658035 1.22064 0.5 1.60218 0.5 2V14C0.5 14.3978 0.658035 14.7794 0.93934 15.0607C1.22064 15.342 1.60218 15.5 2 15.5H20C20.3978 15.5 20.7794 15.342 21.0607 15.0607C21.342 14.7794 21.5 14.3978 21.5 14V2C21.5 1.60218 21.342 1.22064 21.0607 0.93934C20.7794 0.658035 20.3978 0.5 20 0.5ZM18.35 2L11 7.085L3.65 2H18.35ZM2 14V2.6825L10.5725 8.615C10.698 8.7021 10.8472 8.74877 11 8.74877C11.1528 8.74877 11.302 8.7021 11.4275 8.615L20 2.6825V14H2Z"
              fill="white"
            />
          </svg>

          <p>023053080508</p>
        </li>
        <li>
          <select id="countries" className="" onChange={handleChange}>
            {langList.map((d: any, i: number) => (
              <option value={d.value} selected={d === lang} key={i}>
                {d?.value}
              </option>
            ))}
          </select>
        </li>
      </ul>
    </nav>
  );
}

export default Header;
